test \
  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \
  --test_output=errors \
  --verbose_failures \
  --test_verbose_timeout_warnings

run \
  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \
  --verbose_failures \
  --strip=never

build \
  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain \
  --verbose_failures \
  --strip=never

# Options for cross-compiling SmouthOS on the i386 architecture.

# Build and use local toolchain.
common:i386 \
  --crosstool_top=//tools/toolchain \
  --cpu=i386 \
  --compiler=g++ \
  --action_env=WORKSPACE=toolchain-i686-elf \
  --action_env=TARGET=i686-elf

# Use pre-built Linux toolchain. For use in CI.
common:i386-linux-premade \
  --crosstool_top=//tools/toolchain:linux-premade \
  --cpu=i386 \
  --compiler=g++ \
  --action_env=WORKSPACE=toolchain-i686-elf-linux \
  --action_env=TARGET=i686-elf

# Use pre-built MacOS toolchain. For use in CI.
common:i386-darwin-premade \
  --crosstool_top=//tools/toolchain:darwin-premade \
  --cpu=i386 \
  --compiler=g++ \
  --action_env=WORKSPACE=toolchain-i686-elf-darwin \
  --action_env=TARGET=i686-elf

# Continuous Integration (ci) options for running SmouthOS on Jenkins.

common:ci \
  --noshow_progress \
  --noshow_loading_progress \
  --color=no \
  -c opt

build:ci \
  --genrule_strategy=standalone \
  --sandbox_debug \
  --spawn_strategy=standalone

test:ci \
  --test_output=errors \
  --test_strategy=standalone
